kind: Macros
metadata:
  namespace: common-k8s-tasks
spec:
  - name: "k8s.AppAndEnvLabels"
    description: This is a macro for adding labels
    parameters:
      application: undefined
      environment: undefined
    processor:
      - type: freemarker
        description: "Adding app and env label to kubernetes spec"      
        parameters:
          template: |
            { "metadata" : {
              "labels": {
                "application": "${application}",
                    "environment": "${environment}",
              }
             }
            }
        variables:
          application: "#{#params['application']}"
          environment: "#{#params['environment']}"